[debug] [2024-05-28T19:34:19.930Z] ----------------------------------------------------------------------
[debug] [2024-05-28T19:34:19.931Z] Command:       /home/caio-domingos/.nvm/versions/node/v18.20.3/bin/node /home/caio-domingos/.nvm/versions/node/v18.20.3/bin/firebase emulators:start --only functions
[debug] [2024-05-28T19:34:19.932Z] CLI Version:   13.10.2
[debug] [2024-05-28T19:34:19.932Z] Platform:      linux
[debug] [2024-05-28T19:34:19.932Z] Node Version:  v18.20.3
[debug] [2024-05-28T19:34:19.932Z] Time:          Tue May 28 2024 16:34:19 GMT-0300 (Brasilia Standard Time)
[debug] [2024-05-28T19:34:19.933Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-05-28T19:34:20.028Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-05-28T19:34:20.028Z] > authorizing via signed-in user (caio.domingos@thinkless.com.br)
[info] i  emulators: Starting emulators: functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions"}}
[debug] [2024-05-28T19:34:20.033Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2024-05-28T19:34:20.037Z] [hub] writing locator at /tmp/hub-thinkless.json
[debug] [2024-05-28T19:34:20.049Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, firestore, database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, firestore, database, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2024-05-28T19:34:20.052Z] defaultcredentials: writing to file /home/caio-domingos/.config/firebase/caio_domingos_thinkless.com.br_application_default_credentials.json
[debug] [2024-05-28T19:34:20.054Z] Setting GAC to /home/caio-domingos/.config/firebase/caio_domingos_thinkless.com.br_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /home/caio-domingos/.config/firebase/caio_domingos_thinkless.com.br_application_default_credentials.json"}}
[debug] [2024-05-28T19:34:20.055Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/thinkless/adminSdkConfig [none]
[debug] [2024-05-28T19:34:20.466Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/thinkless/adminSdkConfig 200
[debug] [2024-05-28T19:34:20.466Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/thinkless/adminSdkConfig {"projectId":"thinkless","storageBucket":"thinkless.appspot.com"}
[debug] [2024-05-28T19:34:20.479Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-05-28T19:34:20.480Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2024-05-28T19:34:20.480Z] Starting Emulator UI with command {"binary":"node","args":["/home/caio-domingos/.cache/firebase/emulators/ui-v1.12.1/server/server.mjs"],"optionalArgs":[],"joinArgs":false,"shell":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/home/caio-domingos/.cache/firebase/emulators/ui-v1.12.1/server/server.mjs\"],\"optionalArgs\":[],\"joinArgs\":false,\"shell\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2024-05-28T19:34:20.592Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[info] i  functions: Watching "/home/caio-domingos/thinkless/intern/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/home/caio-domingos/thinkless/intern/functions\" for Cloud Functions..."}}
[debug] [2024-05-28T19:34:20.693Z] Validating nodejs source
[debug] [2024-05-28T19:34:21.153Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "form-data": "^4.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailgun.js": "^10.2.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:34:21.153Z] Building nodejs source
[debug] [2024-05-28T19:34:21.153Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:34:21.155Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:34:21.158Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8263

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:34:21.474Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/thinkless/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/thinkless/us-central1/api)."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2024-05-28T19:34:30.067Z] [work-queue] {"queuedWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:34:30.067Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-05-28T19:34:30.067Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:34:30.067Z"],"workRunningCount":1}
[debug] [2024-05-28T19:34:30.068Z] Accepted request GET /thinkless/us-central1/api/email/send --> us-central1-api
[debug] [2024-05-28T19:34:30.070Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-05-28T19:34:30.071Z] [functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send"}}
[debug] [2024-05-28T19:34:30.079Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2024-05-28T19:34:30.081Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2024-05-28T19:34:30.790Z] [runtime-status] [299433] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:34:30.790Z] [runtime-status] [299433] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:34:30.791Z] [runtime-status] [299433] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-05-28T19:34:30.791Z] [runtime-status] [299433] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:34:30.918Z] [runtime-status] [299433] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-05-28T19:34:30.919Z] [runtime-status] [299433] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-05-28T19:34:30.920Z] [runtime-status] [299433] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:34:30.920Z] [runtime-status] [299433] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:34:30.922Z] [runtime-status] [299433] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:34:30.922Z] [runtime-status] [299433] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  {"severity":"INFO","message":"Adding route: /email"} {"user":{"severity":"INFO","message":"Adding route: /email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Adding route: /email\"}"}}
[debug] [2024-05-28T19:34:31.028Z] [runtime-status] [299433] Functions runtime initialized. {"cwd":"/home/caio-domingos/thinkless/intern/functions","node_version":"18.20.3"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Functions runtime initialized. {\"cwd\":\"/home/caio-domingos/thinkless/intern/functions\",\"node_version\":\"18.20.3\"}"}}
[debug] [2024-05-28T19:34:31.029Z] [runtime-status] [299433] Listening to port: /tmp/fire_emu_38559a5a1eac9b66.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [299433] Listening to port: /tmp/fire_emu_38559a5a1eac9b66.sock"}}
[debug] [2024-05-28T19:34:31.091Z] [worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: IDLE"}}
[debug] [2024-05-28T19:34:31.091Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2024-05-28T19:34:31.092Z] [worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: BUSY"}}
[debug] [2024-05-28T19:34:31.101Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 9.2518ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 9.2518ms"}}
[debug] [2024-05-28T19:34:31.101Z] [worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: IDLE"}}
[debug] [2024-05-28T19:34:31.101Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-05-28T19:34:31.102Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-05-28T19:34:31.102Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  GET /email/send 404 3.663 ms - 149 {"user":"\u001b[0mGET /email/send \u001b[33m404\u001b[0m 3.663 ms - 149\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mGET /email/send \u001b[33m404\u001b[0m 3.663 ms - 149\u001b[0m"}}
[debug] [2024-05-28T19:34:47.093Z] [work-queue] {"queuedWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:34:47.093Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-05-28T19:34:47.093Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:34:47.093Z"],"workRunningCount":1}
[debug] [2024-05-28T19:34:47.094Z] Accepted request POST /thinkless/us-central1/api/email/send --> us-central1-api
[debug] [2024-05-28T19:34:47.096Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-05-28T19:34:47.097Z] [functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send"}}
[debug] [2024-05-28T19:34:47.097Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2024-05-28T19:34:47.097Z] [worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: BUSY"}}
[error] i  Your function timed out after ~60s. To configure this timeout, see
      https://firebase.google.com/docs/functions/manage-functions#set_timeout_and_memory_allocation. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your function timed out after ~60s. To configure this timeout, see\n      https://firebase.google.com/docs/functions/manage-functions#set_timeout_and_memory_allocation."}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2024-05-28T19:35:47.119Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  POST /email/send - - ms - - {"user":"\u001b[0mPOST /email/send \u001b[0m-\u001b[0m - ms - -\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mPOST /email/send \u001b[0m-\u001b[0m - ms - -\u001b[0m"}}
[debug] [2024-05-28T19:35:47.126Z] [worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: exited"}}
[debug] [2024-05-28T19:35:47.126Z] [worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70b1614c-a1a1-4e07-9c9b-b4aa009c7309]: FINISHED"}}
[debug] [2024-05-28T19:35:55.098Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T19:35:55.538Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T19:35:55.538Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T19:35:55.538Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.route.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.route.js.map changed, reloading triggers"}}
[debug] [2024-05-28T19:35:55.538Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.route.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.route.js changed, reloading triggers"}}
[debug] [2024-05-28T19:35:56.539Z] Validating nodejs source
[debug] [2024-05-28T19:35:56.994Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "form-data": "^4.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailgun.js": "^10.2.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:35:56.994Z] Building nodejs source
[debug] [2024-05-28T19:35:56.995Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:35:56.995Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:35:56.996Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8980

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:35:57.301Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T19:36:03.039Z] [work-queue] {"queuedWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:36:03.039Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-05-28T19:36:03.039Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:36:03.039Z"],"workRunningCount":1}
[debug] [2024-05-28T19:36:03.039Z] Accepted request POST /thinkless/us-central1/api/email/send --> us-central1-api
[debug] [2024-05-28T19:36:03.041Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-05-28T19:36:03.041Z] [functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send"}}
[debug] [2024-05-28T19:36:03.042Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2024-05-28T19:36:03.044Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2024-05-28T19:36:03.044Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2024-05-28T19:36:03.720Z] [runtime-status] [300642] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:36:03.723Z] [runtime-status] [300642] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:36:03.724Z] [runtime-status] [300642] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-05-28T19:36:03.725Z] [runtime-status] [300642] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:36:03.854Z] [runtime-status] [300642] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-05-28T19:36:03.854Z] [runtime-status] [300642] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-05-28T19:36:03.856Z] [runtime-status] [300642] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:36:03.856Z] [runtime-status] [300642] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:36:03.858Z] [runtime-status] [300642] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:36:03.859Z] [runtime-status] [300642] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  {"severity":"INFO","message":"Adding route: /email"} {"user":{"severity":"INFO","message":"Adding route: /email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Adding route: /email\"}"}}
[debug] [2024-05-28T19:36:03.963Z] [runtime-status] [300642] Functions runtime initialized. {"cwd":"/home/caio-domingos/thinkless/intern/functions","node_version":"18.20.3"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Functions runtime initialized. {\"cwd\":\"/home/caio-domingos/thinkless/intern/functions\",\"node_version\":\"18.20.3\"}"}}
[debug] [2024-05-28T19:36:03.965Z] [runtime-status] [300642] Listening to port: /tmp/fire_emu_d9803b97ed660269.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [300642] Listening to port: /tmp/fire_emu_d9803b97ed660269.sock"}}
[debug] [2024-05-28T19:36:04.059Z] [worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: IDLE"}}
[debug] [2024-05-28T19:36:04.059Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2024-05-28T19:36:04.060Z] [worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: BUSY"}}
[debug] [2024-05-28T19:36:04.070Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 10.2797ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 10.2797ms"}}
[debug] [2024-05-28T19:36:04.071Z] [worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: IDLE"}}
[debug] [2024-05-28T19:36:04.071Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-05-28T19:36:04.071Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-05-28T19:36:04.071Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  POST /email/send 500 4.539 ms - 22 {"user":"\u001b[0mPOST /email/send \u001b[31m500\u001b[0m 4.539 ms - 22\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mPOST /email/send \u001b[31m500\u001b[0m 4.539 ms - 22\u001b[0m"}}
[debug] [2024-05-28T19:36:11.299Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T19:36:11.596Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T19:36:11.596Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T19:36:12.597Z] Validating nodejs source
[debug] [2024-05-28T19:36:13.061Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "form-data": "^4.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailgun.js": "^10.2.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:36:13.061Z] Building nodejs source
[debug] [2024-05-28T19:36:13.061Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:36:13.063Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:36:13.064Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8290

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:36:13.419Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T19:36:13.435Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2024-05-28T19:36:13.436Z] [worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: FINISHING"}}
[debug] [2024-05-28T19:36:13.443Z] [worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: exited"}}
[debug] [2024-05-28T19:36:13.443Z] [worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-eaa2e66e-8693-4302-af54-7b55d8b2fed8]: FINISHED"}}
[debug] [2024-05-28T19:36:19.657Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T19:36:19.981Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T19:36:19.982Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T19:36:20.983Z] Validating nodejs source
[debug] [2024-05-28T19:36:21.479Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "form-data": "^4.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailgun.js": "^10.2.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:36:21.479Z] Building nodejs source
[debug] [2024-05-28T19:36:21.479Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:36:21.480Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:36:21.482Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8485

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:36:21.852Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T19:36:24.101Z] [work-queue] {"queuedWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:36:24.101Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-05-28T19:36:24.103Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:36:24.101Z"],"workRunningCount":1}
[debug] [2024-05-28T19:36:24.104Z] Accepted request POST /thinkless/us-central1/api/email/send --> us-central1-api
[debug] [2024-05-28T19:36:24.106Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-05-28T19:36:24.107Z] [functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send"}}
[debug] [2024-05-28T19:36:24.107Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2024-05-28T19:36:24.110Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2024-05-28T19:36:24.110Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2024-05-28T19:36:24.771Z] [runtime-status] [301142] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:36:24.772Z] [runtime-status] [301142] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:36:24.773Z] [runtime-status] [301142] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-05-28T19:36:24.773Z] [runtime-status] [301142] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:36:24.890Z] [runtime-status] [301142] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-05-28T19:36:24.890Z] [runtime-status] [301142] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-05-28T19:36:24.890Z] [runtime-status] [301142] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:36:24.892Z] [runtime-status] [301142] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:36:24.893Z] [runtime-status] [301142] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:36:24.893Z] [runtime-status] [301142] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  {"severity":"INFO","message":"Adding route: /email"} {"user":{"severity":"INFO","message":"Adding route: /email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Adding route: /email\"}"}}
[debug] [2024-05-28T19:36:24.998Z] [runtime-status] [301142] Functions runtime initialized. {"cwd":"/home/caio-domingos/thinkless/intern/functions","node_version":"18.20.3"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Functions runtime initialized. {\"cwd\":\"/home/caio-domingos/thinkless/intern/functions\",\"node_version\":\"18.20.3\"}"}}
[debug] [2024-05-28T19:36:25.001Z] [runtime-status] [301142] Listening to port: /tmp/fire_emu_f291a6d28b317e33.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [301142] Listening to port: /tmp/fire_emu_f291a6d28b317e33.sock"}}
[debug] [2024-05-28T19:36:25.027Z] [worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: IDLE"}}
[debug] [2024-05-28T19:36:25.027Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2024-05-28T19:36:25.028Z] [worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: BUSY"}}
[info] >  {"severity":"ERROR","message":"TypeError: this.FormDataConstructor is not a constructor\n    at e.createFormData (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:68754)\n    at e.postWithFD (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:79726)\n    at e.create (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:42795)\n    at sendEmail (/home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js:59:40)\n    at Layer.handle [as handle_request] (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/layer.js:95:5)\n    at /home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/index.js:346:12)"} {"user":{"severity":"ERROR","message":"TypeError: this.FormDataConstructor is not a constructor\n    at e.createFormData (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:68754)\n    at e.postWithFD (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:79726)\n    at e.create (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:42795)\n    at sendEmail (/home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js:59:40)\n    at Layer.handle [as handle_request] (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/layer.js:95:5)\n    at /home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/index.js:346:12)"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"TypeError: this.FormDataConstructor is not a constructor\\n    at e.createFormData (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:68754)\\n    at e.postWithFD (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:79726)\\n    at e.create (/home/caio-domingos/thinkless/intern/functions/node_modules/mailgun.js/mailgun.node.js:2:42795)\\n    at sendEmail (/home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js:59:40)\\n    at Layer.handle [as handle_request] (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/route.js:149:13)\\n    at Route.dispatch (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/route.js:119:3)\\n    at Layer.handle [as handle_request] (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/layer.js:95:5)\\n    at /home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/index.js:284:15\\n    at Function.process_params (/home/caio-domingos/thinkless/intern/functions/node_modules/express/lib/router/index.js:346:12)\"}"}}
[debug] [2024-05-28T19:36:25.040Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 12.1772ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 12.1772ms"}}
[debug] [2024-05-28T19:36:25.040Z] [worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: IDLE"}}
[debug] [2024-05-28T19:36:25.040Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-05-28T19:36:25.041Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-05-28T19:36:25.041Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  POST /email/send 500 6.726 ms - 22 {"user":"\u001b[0mPOST /email/send \u001b[31m500\u001b[0m 6.726 ms - 22\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mPOST /email/send \u001b[31m500\u001b[0m 6.726 ms - 22\u001b[0m"}}
[debug] [2024-05-28T19:38:59.025Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T19:38:59.340Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T19:38:59.340Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T19:39:00.341Z] Validating nodejs source
[debug] [2024-05-28T19:39:00.845Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "form-data": "^4.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailgun.js": "^10.2.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:39:00.845Z] Building nodejs source
[debug] [2024-05-28T19:39:00.846Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:39:00.847Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:39:00.848Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8332

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:39:01.207Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T19:39:01.218Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2024-05-28T19:39:01.218Z] [worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: FINISHING"}}
[debug] [2024-05-28T19:39:01.224Z] [worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: exited"}}
[debug] [2024-05-28T19:39:01.224Z] [worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1aa1eceb-d939-4163-b3ad-811bcbcbe626]: FINISHED"}}
[debug] [2024-05-28T19:39:07.512Z] [work-queue] {"queuedWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:39:07.512Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-05-28T19:39:07.513Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:39:07.512Z"],"workRunningCount":1}
[debug] [2024-05-28T19:39:07.513Z] Accepted request POST /thinkless/us-central1/api/email/send --> us-central1-api
[debug] [2024-05-28T19:39:07.515Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-05-28T19:39:07.515Z] [functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send"}}
[debug] [2024-05-28T19:39:07.515Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2024-05-28T19:39:07.518Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2024-05-28T19:39:07.518Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2024-05-28T19:39:08.206Z] [runtime-status] [302863] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:39:08.208Z] [runtime-status] [302863] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:39:08.208Z] [runtime-status] [302863] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-05-28T19:39:08.209Z] [runtime-status] [302863] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:39:08.327Z] [runtime-status] [302863] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-05-28T19:39:08.327Z] [runtime-status] [302863] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-05-28T19:39:08.329Z] [runtime-status] [302863] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:39:08.329Z] [runtime-status] [302863] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:39:08.331Z] [runtime-status] [302863] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:39:08.331Z] [runtime-status] [302863] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  {"severity":"INFO","message":"Adding route: /email"} {"user":{"severity":"INFO","message":"Adding route: /email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Adding route: /email\"}"}}
[debug] [2024-05-28T19:39:08.453Z] [runtime-status] [302863] Functions runtime initialized. {"cwd":"/home/caio-domingos/thinkless/intern/functions","node_version":"18.20.3"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Functions runtime initialized. {\"cwd\":\"/home/caio-domingos/thinkless/intern/functions\",\"node_version\":\"18.20.3\"}"}}
[debug] [2024-05-28T19:39:08.456Z] [runtime-status] [302863] Listening to port: /tmp/fire_emu_64433b170f17e818.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [302863] Listening to port: /tmp/fire_emu_64433b170f17e818.sock"}}
[debug] [2024-05-28T19:39:08.531Z] [worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: IDLE"}}
[debug] [2024-05-28T19:39:08.532Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2024-05-28T19:39:08.532Z] [worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: BUSY"}}
[info] >  {"severity":"ERROR","message":"[Error: Forbidden] {\n  status: 403,\n  details: 'Domain thinkless.com.br is not allowed to send: Free accounts are for test purposes only. Please upgrade or add the address to authorized recipients in Account Settings.',\n  type: 'MailgunAPIError'\n}"} {"user":{"severity":"ERROR","message":"[Error: Forbidden] {\n  status: 403,\n  details: 'Domain thinkless.com.br is not allowed to send: Free accounts are for test purposes only. Please upgrade or add the address to authorized recipients in Account Settings.',\n  type: 'MailgunAPIError'\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"[Error: Forbidden] {\\n  status: 403,\\n  details: 'Domain thinkless.com.br is not allowed to send: Free accounts are for test purposes only. Please upgrade or add the address to authorized recipients in Account Settings.',\\n  type: 'MailgunAPIError'\\n}\"}"}}
[debug] [2024-05-28T19:39:09.475Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 943.333503ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 943.333503ms"}}
[debug] [2024-05-28T19:39:09.476Z] [worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: IDLE"}}
[debug] [2024-05-28T19:39:09.476Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-05-28T19:39:09.476Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-05-28T19:39:09.476Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  POST /email/send 500 938.209 ms - 263 {"user":"\u001b[0mPOST /email/send \u001b[31m500\u001b[0m 938.209 ms - 263\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mPOST /email/send \u001b[31m500\u001b[0m 938.209 ms - 263\u001b[0m"}}
[debug] [2024-05-28T19:41:34.250Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T19:41:34.562Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T19:41:34.562Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T19:41:35.565Z] Validating nodejs source
[debug] [2024-05-28T19:41:36.031Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "form-data": "^4.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailgun.js": "^10.2.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:41:36.031Z] Building nodejs source
[debug] [2024-05-28T19:41:36.031Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:41:36.032Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:41:36.033Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8164

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:41:36.348Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T19:41:36.358Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2024-05-28T19:41:36.358Z] [worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: FINISHING"}}
[debug] [2024-05-28T19:41:36.364Z] [worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: exited"}}
[debug] [2024-05-28T19:41:36.364Z] [worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a78288bb-09f6-46ac-9c29-638b4f27f0ae]: FINISHED"}}
[debug] [2024-05-28T19:41:42.195Z] [work-queue] {"queuedWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:41:42.195Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-05-28T19:41:42.195Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/thinkless/us-central1/api/email/send-2024-05-28T19:41:42.195Z"],"workRunningCount":1}
[debug] [2024-05-28T19:41:42.196Z] Accepted request POST /thinkless/us-central1/api/email/send --> us-central1-api
[debug] [2024-05-28T19:41:42.199Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-05-28T19:41:42.199Z] [functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send"}}
[debug] [2024-05-28T19:41:42.199Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2024-05-28T19:41:42.205Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2024-05-28T19:41:42.205Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2024-05-28T19:41:42.944Z] [runtime-status] [304499] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:41:42.946Z] [runtime-status] [304499] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:41:42.947Z] [runtime-status] [304499] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-05-28T19:41:42.948Z] [runtime-status] [304499] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:41:43.087Z] [runtime-status] [304499] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-05-28T19:41:43.087Z] [runtime-status] [304499] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-05-28T19:41:43.090Z] [runtime-status] [304499] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:41:43.090Z] [runtime-status] [304499] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T19:41:43.091Z] [runtime-status] [304499] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T19:41:43.091Z] [runtime-status] [304499] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  {"severity":"INFO","message":"Adding route: /email"} {"user":{"severity":"INFO","message":"Adding route: /email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Adding route: /email\"}"}}
[debug] [2024-05-28T19:41:43.219Z] [runtime-status] [304499] Functions runtime initialized. {"cwd":"/home/caio-domingos/thinkless/intern/functions","node_version":"18.20.3"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Functions runtime initialized. {\"cwd\":\"/home/caio-domingos/thinkless/intern/functions\",\"node_version\":\"18.20.3\"}"}}
[debug] [2024-05-28T19:41:43.223Z] [runtime-status] [304499] Listening to port: /tmp/fire_emu_61d446a41a5491b8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [304499] Listening to port: /tmp/fire_emu_61d446a41a5491b8.sock"}}
[debug] [2024-05-28T19:41:43.319Z] [worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: IDLE"}}
[debug] [2024-05-28T19:41:43.319Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2024-05-28T19:41:43.320Z] [worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: BUSY"}}
[info] >  {"severity":"ERROR","message":"[Error: Forbidden] {\n  status: 403,\n  details: 'Domain sandbox4b137f45cfbc4ffaaeec5e22d0a01cc3.mailgun.org is not allowed to send: Free accounts are for test purposes only. Please upgrade or add the address to authorized recipients in Account Settings.',\n  type: 'MailgunAPIError'\n}"} {"user":{"severity":"ERROR","message":"[Error: Forbidden] {\n  status: 403,\n  details: 'Domain sandbox4b137f45cfbc4ffaaeec5e22d0a01cc3.mailgun.org is not allowed to send: Free accounts are for test purposes only. Please upgrade or add the address to authorized recipients in Account Settings.',\n  type: 'MailgunAPIError'\n}"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"ERROR\",\"message\":\"[Error: Forbidden] {\\n  status: 403,\\n  details: 'Domain sandbox4b137f45cfbc4ffaaeec5e22d0a01cc3.mailgun.org is not allowed to send: Free accounts are for test purposes only. Please upgrade or add the address to authorized recipients in Account Settings.',\\n  type: 'MailgunAPIError'\\n}\"}"}}
[debug] [2024-05-28T19:41:43.987Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 667.258801ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 667.258801ms"}}
[debug] [2024-05-28T19:41:43.988Z] [worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: IDLE"}}
[debug] [2024-05-28T19:41:43.988Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-05-28T19:41:43.988Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-05-28T19:41:43.988Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  POST /email/send 500 663.037 ms - 298 {"user":"\u001b[0mPOST /email/send \u001b[31m500\u001b[0m 663.037 ms - 298\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mPOST /email/send \u001b[31m500\u001b[0m 663.037 ms - 298\u001b[0m"}}
[debug] [2024-05-28T19:54:25.742Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T19:54:26.114Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T19:54:26.114Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T19:54:27.116Z] Validating nodejs source
[debug] [2024-05-28T19:54:27.617Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "form-data": "^4.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailgun.js": "^10.2.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:54:27.617Z] Building nodejs source
[debug] [2024-05-28T19:54:27.617Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:54:27.619Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:54:27.620Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8093

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:54:27.941Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T19:54:27.951Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2024-05-28T19:54:27.951Z] [worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: FINISHING"}}
[debug] [2024-05-28T19:54:27.958Z] [worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: exited"}}
[debug] [2024-05-28T19:54:27.959Z] [worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1d682d51-d829-4977-826e-f1711ec83737]: FINISHED"}}
[debug] [2024-05-28T19:55:22.531Z] File /home/caio-domingos/thinkless/intern/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/package.json changed, reloading triggers"}}
[debug] [2024-05-28T19:55:22.746Z] File /home/caio-domingos/thinkless/intern/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/package-lock.json changed, reloading triggers"}}
[debug] [2024-05-28T19:55:23.748Z] Validating nodejs source
[debug] [2024-05-28T19:55:24.201Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "form-data": "^4.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailersend": "^2.2.0",
    "mailgun.js": "^10.2.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:55:24.201Z] Building nodejs source
[debug] [2024-05-28T19:55:24.201Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:55:24.202Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:55:24.203Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8395

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:55:24.509Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T19:55:38.421Z] File /home/caio-domingos/thinkless/intern/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/package.json changed, reloading triggers"}}
[debug] [2024-05-28T19:55:39.422Z] Validating nodejs source
[debug] [2024-05-28T19:55:39.888Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailersend": "^2.2.0",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:55:39.888Z] Building nodejs source
[debug] [2024-05-28T19:55:39.888Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:55:39.889Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:55:39.890Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8824

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:55:40.384Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T19:55:41.206Z] File /home/caio-domingos/thinkless/intern/functions/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/package-lock.json changed, reloading triggers"}}
[debug] [2024-05-28T19:55:42.206Z] Validating nodejs source
[debug] [2024-05-28T19:55:42.657Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailersend": "^2.2.0",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T19:55:42.657Z] Building nodejs source
[debug] [2024-05-28T19:55:42.657Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T19:55:42.658Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T19:55:42.659Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8610

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T19:55:42.935Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T20:00:25.388Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T20:00:25.911Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T20:00:25.911Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T20:00:26.912Z] Validating nodejs source
[debug] [2024-05-28T20:00:27.511Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailersend": "^2.2.0",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T20:00:27.511Z] Building nodejs source
[debug] [2024-05-28T20:00:27.511Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T20:00:27.512Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T20:00:27.513Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8647

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T20:00:27.929Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T20:00:52.803Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T20:00:53.088Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T20:00:53.088Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T20:00:54.088Z] Validating nodejs source
[debug] [2024-05-28T20:00:54.579Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailersend": "^2.2.0",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T20:00:54.579Z] Building nodejs source
[debug] [2024-05-28T20:00:54.579Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T20:00:54.579Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T20:00:54.580Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8751

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T20:00:54.896Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T20:01:13.039Z] [work-queue] {"queuedWork":["/thinkless/us-central1/api/email/send-2024-05-28T20:01:13.039Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-05-28T20:01:13.039Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/thinkless/us-central1/api/email/send-2024-05-28T20:01:13.039Z"],"workRunningCount":1}
[debug] [2024-05-28T20:01:13.039Z] Accepted request POST /thinkless/us-central1/api/email/send --> us-central1-api
[debug] [2024-05-28T20:01:13.043Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-05-28T20:01:13.043Z] [functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send"}}
[debug] [2024-05-28T20:01:13.043Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2024-05-28T20:01:13.048Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2024-05-28T20:01:13.048Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2024-05-28T20:01:13.897Z] [runtime-status] [316345] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T20:01:13.898Z] [runtime-status] [316345] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T20:01:13.899Z] [runtime-status] [316345] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-05-28T20:01:13.900Z] [runtime-status] [316345] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T20:01:14.028Z] [runtime-status] [316345] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-05-28T20:01:14.028Z] [runtime-status] [316345] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-05-28T20:01:14.029Z] [runtime-status] [316345] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T20:01:14.030Z] [runtime-status] [316345] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T20:01:14.032Z] [runtime-status] [316345] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T20:01:14.032Z] [runtime-status] [316345] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  {"severity":"INFO","message":"Adding route: /email"} {"user":{"severity":"INFO","message":"Adding route: /email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Adding route: /email\"}"}}
[debug] [2024-05-28T20:01:14.142Z] [runtime-status] [316345] Functions runtime initialized. {"cwd":"/home/caio-domingos/thinkless/intern/functions","node_version":"18.20.3"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Functions runtime initialized. {\"cwd\":\"/home/caio-domingos/thinkless/intern/functions\",\"node_version\":\"18.20.3\"}"}}
[debug] [2024-05-28T20:01:14.144Z] [runtime-status] [316345] Listening to port: /tmp/fire_emu_5c299bef8e1a9607.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [316345] Listening to port: /tmp/fire_emu_5c299bef8e1a9607.sock"}}
[debug] [2024-05-28T20:01:14.179Z] [worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: IDLE"}}
[debug] [2024-05-28T20:01:14.179Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2024-05-28T20:01:14.179Z] [worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.mailersend.com/v1/email"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.mailersend.com/v1/email\"\n - Be careful, this may be a production service."}}
[info] >  {"headers":{"cache-control":"no-cache, private","cf-cache-status":"DYNAMIC","cf-ray":"88b0d5df0b2f01a9-GRU","connection":"close","content-type":"application/json","date":"Tue, 28 May 2024 20:01:14 GMT","server":"cloudflare","strict-transport-security":"max-age=31536000; includeSubDomains","transfer-encoding":"chunked","x-apiquota-remaining":"100","x-apiquota-reset":"2024-05-29T00:00:00Z","x-ratelimit-limit":"10","x-ratelimit-remaining":"9"},"body":{"message":"The to.0.email field is required. #MS42209","errors":{"to.0.email":["The to.0.email field is required. #MS42209"]}},"statusCode":422,"severity":"ERROR","message":"Error\n    at entryFromArgs (/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/logger/index.js:130:19)\n    at Object.error (/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/logger/index.js:116:11)\n    at sendEmail (/home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js:48:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"} {"user":{"headers":{"cache-control":"no-cache, private","cf-cache-status":"DYNAMIC","cf-ray":"88b0d5df0b2f01a9-GRU","connection":"close","content-type":"application/json","date":"Tue, 28 May 2024 20:01:14 GMT","server":"cloudflare","strict-transport-security":"max-age=31536000; includeSubDomains","transfer-encoding":"chunked","x-apiquota-remaining":"100","x-apiquota-reset":"2024-05-29T00:00:00Z","x-ratelimit-limit":"10","x-ratelimit-remaining":"9"},"body":{"message":"The to.0.email field is required. #MS42209","errors":{"to.0.email":["The to.0.email field is required. #MS42209"]}},"statusCode":422,"severity":"ERROR","message":"Error\n    at entryFromArgs (/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/logger/index.js:130:19)\n    at Object.error (/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/logger/index.js:116:11)\n    at sendEmail (/home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js:48:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"headers\":{\"cache-control\":\"no-cache, private\",\"cf-cache-status\":\"DYNAMIC\",\"cf-ray\":\"88b0d5df0b2f01a9-GRU\",\"connection\":\"close\",\"content-type\":\"application/json\",\"date\":\"Tue, 28 May 2024 20:01:14 GMT\",\"server\":\"cloudflare\",\"strict-transport-security\":\"max-age=31536000; includeSubDomains\",\"transfer-encoding\":\"chunked\",\"x-apiquota-remaining\":\"100\",\"x-apiquota-reset\":\"2024-05-29T00:00:00Z\",\"x-ratelimit-limit\":\"10\",\"x-ratelimit-remaining\":\"9\"},\"body\":{\"message\":\"The to.0.email field is required. #MS42209\",\"errors\":{\"to.0.email\":[\"The to.0.email field is required. #MS42209\"]}},\"statusCode\":422,\"severity\":\"ERROR\",\"message\":\"Error\\n    at entryFromArgs (/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/logger/index.js:130:19)\\n    at Object.error (/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/logger/index.js:116:11)\\n    at sendEmail (/home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js:48:21)\\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\"}"}}
[debug] [2024-05-28T20:01:15.049Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 869.772398ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 869.772398ms"}}
[debug] [2024-05-28T20:01:15.049Z] [worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: IDLE"}}
[debug] [2024-05-28T20:01:15.049Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-05-28T20:01:15.050Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-05-28T20:01:15.050Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  POST /email/send 500 864.727 ms - 617 {"user":"\u001b[0mPOST /email/send \u001b[31m500\u001b[0m 864.727 ms - 617\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mPOST /email/send \u001b[31m500\u001b[0m 864.727 ms - 617\u001b[0m"}}
[debug] [2024-05-28T20:02:42.923Z] File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/src/api/routes/email/email.controller.ts changed, reloading triggers"}}
[debug] [2024-05-28T20:02:43.218Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js.map changed, reloading triggers"}}
[debug] [2024-05-28T20:02:43.219Z] File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/caio-domingos/thinkless/intern/functions/lib/api/routes/email/email.controller.js changed, reloading triggers"}}
[debug] [2024-05-28T20:02:44.220Z] Validating nodejs source
[debug] [2024-05-28T20:02:44.676Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve:only": "firebase emulators:start --only functions",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^5.0.0",
    "helmet": "^7.1.0",
    "hpp": "^0.2.3",
    "mailersend": "^2.2.0",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "@types/compression": "^1.7.5",
    "@types/hpp": "^0.2.6",
    "@types/morgan": "^1.9.9",
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-05-28T20:02:44.676Z] Building nodejs source
[debug] [2024-05-28T20:02:44.677Z] Failed to find version of module node: reached end of search path /home/caio-domingos/thinkless/intern/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2024-05-28T20:02:44.677Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-05-28T20:02:44.678Z] Found firebase-functions binary at '/home/caio-domingos/thinkless/intern/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8274

[info] {"severity":"INFO","message":"Adding route: /email"}

[debug] [2024-05-28T20:02:44.992Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2024-05-28T20:02:45.002Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2024-05-28T20:02:45.002Z] [worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: FINISHING"}}
[debug] [2024-05-28T20:02:45.009Z] [worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: exited"}}
[debug] [2024-05-28T20:02:45.009Z] [worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a578fbe7-b1da-44e4-bbde-4e57923adf94]: FINISHED"}}
[debug] [2024-05-28T20:02:50.691Z] [work-queue] {"queuedWork":["/thinkless/us-central1/api/email/send-2024-05-28T20:02:50.691Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-05-28T20:02:50.691Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/thinkless/us-central1/api/email/send-2024-05-28T20:02:50.691Z"],"workRunningCount":1}
[debug] [2024-05-28T20:02:50.691Z] Accepted request POST /thinkless/us-central1/api/email/send --> us-central1-api
[debug] [2024-05-28T20:02:50.693Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-05-28T20:02:50.694Z] [functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/thinkless/us-central1/api/email/send, mapping to path=/email/send"}}
[debug] [2024-05-28T20:02:50.694Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2024-05-28T20:02:50.697Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2024-05-28T20:02:50.697Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2024-05-28T20:02:51.372Z] [runtime-status] [317447] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T20:02:51.373Z] [runtime-status] [317447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T20:02:51.373Z] [runtime-status] [317447] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-05-28T20:02:51.374Z] [runtime-status] [317447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T20:02:51.506Z] [runtime-status] [317447] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Checked functions.config() {\"config\":{}}"}}
[debug] [2024-05-28T20:02:51.507Z] [runtime-status] [317447] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2024-05-28T20:02:51.508Z] [runtime-status] [317447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T20:02:51.508Z] [runtime-status] [317447] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2024-05-28T20:02:51.509Z] [runtime-status] [317447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.0.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.0.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2024-05-28T20:02:51.509Z] [runtime-status] [317447] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.1.1","resolution":"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.1.1\",\"resolution\":\"/home/caio-domingos/thinkless/intern/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[info] >  {"severity":"INFO","message":"Adding route: /email"} {"user":{"severity":"INFO","message":"Adding route: /email"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"INFO\",\"message\":\"Adding route: /email\"}"}}
[debug] [2024-05-28T20:02:51.609Z] [runtime-status] [317447] Functions runtime initialized. {"cwd":"/home/caio-domingos/thinkless/intern/functions","node_version":"18.20.3"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Functions runtime initialized. {\"cwd\":\"/home/caio-domingos/thinkless/intern/functions\",\"node_version\":\"18.20.3\"}"}}
[debug] [2024-05-28T20:02:51.611Z] [runtime-status] [317447] Listening to port: /tmp/fire_emu_c12a51aa4334ccd9.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [317447] Listening to port: /tmp/fire_emu_c12a51aa4334ccd9.sock"}}
[debug] [2024-05-28T20:02:51.709Z] [worker-us-central1-api-85498e3e-1fa0-439d-8ac8-87ab80b54d12]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-85498e3e-1fa0-439d-8ac8-87ab80b54d12]: IDLE"}}
[debug] [2024-05-28T20:02:51.710Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2024-05-28T20:02:51.710Z] [worker-us-central1-api-85498e3e-1fa0-439d-8ac8-87ab80b54d12]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-85498e3e-1fa0-439d-8ac8-87ab80b54d12]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://api.mailersend.com/v1/email"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://api.mailersend.com/v1/email\"\n - Be careful, this may be a production service."}}
[debug] [2024-05-28T20:02:52.210Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 499.8129ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 499.8129ms"}}
[debug] [2024-05-28T20:02:52.210Z] [worker-us-central1-api-85498e3e-1fa0-439d-8ac8-87ab80b54d12]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-85498e3e-1fa0-439d-8ac8-87ab80b54d12]: IDLE"}}
[debug] [2024-05-28T20:02:52.210Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-05-28T20:02:52.210Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-05-28T20:02:52.210Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  POST /email/send 200 494.841 ms - 540 {"user":"\u001b[0mPOST /email/send \u001b[32m200\u001b[0m 494.841 ms - 540\u001b[0m","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m \u001b[0mPOST /email/send \u001b[32m200\u001b[0m 494.841 ms - 540\u001b[0m"}}
